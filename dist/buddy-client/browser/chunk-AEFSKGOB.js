import{a as ae,c as z,d as se,e as ce,f as le,g as me,h as de,i as pe}from"./chunk-HGG5G6P5.js";import{l as ne}from"./chunk-7LMB4PFW.js";import{a as ee,b as te,c as ie}from"./chunk-ZONYYMNB.js";import{B as re,E as oe,y as f}from"./chunk-CEJIGEVO.js";import{Aa as p,Ab as Z,Ba as U,Ca as G,Cb as J,Da as A,E as v,Ea as k,F as S,Ga as T,H as d,Ha as m,L as b,La as B,M as y,Ma as V,N as g,Na as W,O as w,Qa as O,Ra as u,Ta as D,V as L,X as M,_ as H,bb as F,ca as Y,da as s,fb as N,hb as I,la as x,ma as C,nb as Q,ob as $,pa as h,pb as X,sa as _,sb as K,ta as c,ua as E,va as R,wa as P,ya as o,za as a,zb as q}from"./chunk-HX2KIA6G.js";var Me=["determinateSpinner"];function xe(t,r){if(t&1&&(g(),o(0,"svg",11),p(1,"circle",12),a()),t&2){let e=m();_("viewBox",e._viewBox()),s(),E("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),_("r",e._circleRadius())}}var Ce=new S("mat-progress-spinner-default-options",{providedIn:"root",factory:Ie});function Ie(){return{diameter:ue}}var ue=100,we=10,he=(()=>{class t{_elementRef=d(L);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=d(H,{optional:!0}),i=d(Ce);this._noopAnimations=e==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=ue;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-we)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=x({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,n){if(i&1&&B(Me,5),i&2){let l;V(l=W())&&(n._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,n){i&2&&(_("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),P("mat-"+n.color),E("width",n.diameter,"px")("height",n.diameter,"px")("--mdc-circular-progress-size",n.diameter+"px")("--mdc-circular-progress-active-indicator-width",n.diameter+"px"),R("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",N],diameter:[2,"diameter","diameter",N],strokeWidth:[2,"strokeWidth","strokeWidth",N]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,n){if(i&1&&(h(0,xe,2,8,"ng-template",null,0,F),o(2,"div",2,1),g(),o(4,"svg",3),p(5,"circle",4),a()(),w(),o(6,"div",5)(7,"div",6)(8,"div",7),A(9,8),a(),o(10,"div",9),A(11,8),a(),o(12,"div",10),A(13,8),a()()()),i&2){let l=O(1);s(4),_("viewBox",n._viewBox()),s(),E("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),_("r",n._circleRadius()),s(4),c("ngTemplateOutlet",l),s(2),c("ngTemplateOutlet",l),s(2),c("ngTemplateOutlet",l)}},dependencies:[X],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return t})();var _e=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=C({type:t});static \u0275inj=v({imports:[f]})}return t})();var Ee=new S("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=d(z);return()=>t.scrollStrategies.reposition()}});function Re(t){return()=>t.scrollStrategies.reposition()}var Pe={provide:Ee,deps:[z],useFactory:Re};var fe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=C({type:t});static \u0275inj=v({providers:[Pe],imports:[re,f,se,ae,f]})}return t})(),ge={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},Pt=ge.fadeInItems,At=ge.transformMenu;var ve=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=C({type:t});static \u0275inj=v({imports:[f,f]})}return t})();function Ae(t,r){t&1&&(U(0),o(1,"p"),u(2,"Loading applications submitted for you\u2026"),a(),G())}function Oe(t,r){if(t&1&&p(0,"app-application-card",21),t&2){let e=r.$implicit;c("app",e)("isSubmitter",!1)}}function De(t,r){if(t&1&&(o(0,"section",19)(1,"h3"),u(2,"Applications submitted for you"),a(),h(3,Oe,1,2,"app-application-card",20),a()),t&2){let e=m(2);s(3),c("ngForOf",e.targeted())}}function Fe(t,r){if(t&1&&h(0,De,4,1,"section",18),t&2){let e,i=m();c("ngIf",((e=i.user())==null?null:e.role)==="BRO"&&i.targeted().length)}}function Ne(t,r){t&1&&(o(0,"section",22),p(1,"mat-spinner",23),o(2,"p"),u(3,"Loading your submitted applications..."),a()())}function Le(t,r){if(t&1){let e=k();o(0,"app-application-card",32),T("removed",function(){let n=b(e).$implicit,l=m(2);return y(l.onRemoved(n.id))})("refreshed",function(){b(e);let n=m(2);return y(n.refresh())}),a()}if(t&2){let e=r.$implicit;c("app",e)("isSubmitter",!0)}}function He(t,r){if(t&1){let e=k();o(0,"section",24)(1,"h3"),u(2,"Your submitted applications"),a(),h(3,Le,1,2,"app-application-card",25),o(4,"div",26)(5,"button",27),T("click",function(){b(e);let n=m();return y(n.openNewApplication(n.selectedAppType))}),g(),o(6,"svg",28),p(7,"circle",29)(8,"line",30)(9,"line",31),a(),w(),o(10,"span"),u(11,"Create"),a()()()()}if(t&2){let e=m();s(3),c("ngForOf",e.mine())}}function Be(t,r){if(t&1&&(o(0,"section",33),u(1),a()),t&2){let e,i=m();s(),D(" Pending member application #",(e=i.pendingMember())==null?null:e.id," ")}}function Ve(t,r){if(t&1&&(o(0,"section",33),u(1),a()),t&2){let e,i=m();s(),D(" Pending admin application #",(e=i.pendingAdmin())==null?null:e.id," ")}}function We(t,r){t&1&&(o(0,"a",34),u(1,"Admin Panel"),a())}function ze(t,r){t&1&&(o(0,"a",35),u(1,"Minigame"),a())}var be=class t{api=d(te);auth=d(ie);dialog=d(me);AppType=ee;router=d(q);selectedAppType="MEMBER";mine=M([]);broApplications=M([]);loadingMine=M(!1);loadingTarget=M(!1);user=this.auth.user();avatarUrl=I(()=>`https://api.dicebear.com/8.x/thumbs/svg?seed=${this.user()?.username}`);targeted=M([]);pendingMember=I(()=>this.user()?.role!=="BRO"?null:this.targeted().find(r=>r.targetUser===this.user()?.username&&r.type==="MEMBER"));pendingAdmin=I(()=>this.user()?.role==="ADMIN"?null:this.targeted().find(r=>r.targetUser===this.user()?.username&&r.type==="ADMIN"));isMember=I(()=>this.user()?.role==="MEMBER");isAdmin=I(()=>this.user()?.role==="ADMIN");constructor(){this.refresh()}onRemoved(r){this.mine.update(e=>e.filter(i=>i.id!==r)),this.refresh()}refresh(){let r=this.user()?.username;r&&(this.loadingMine.set(!0),this.api.getMine().subscribe({next:e=>{this.mine.set(e),this.loadingMine.set(!1)},error:()=>this.loadingMine.set(!1)}),this.loadingTarget.set(!0),this.api.getTargeted(r).subscribe({next:e=>{this.targeted.set(e),this.loadingTarget.set(!1)},error:()=>this.loadingTarget.set(!1)}))}openNewApplication(r){let e=this.user()?.username;if(!e)return;let i=this.dialog.open(pe,{data:{type:r,currentUser:e}}),n=i.componentInstance;n.currentUser=e,i.afterClosed().subscribe(l=>{l&&l.targetUser!==e?this.refresh():l&&l.targetUser===e&&alert("You can't submit an application for yourself.")})}logout(){this.auth.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=x({type:t,selectors:[["app-home"]],decls:21,vars:10,consts:[["targetedList",""],[1,"container"],[1,"header"],["alt","avatar",1,"avatar",3,"src"],[1,"welcome"],[1,"spacer"],["matTooltip","Logout",1,"logout-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-log-out"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[4,"ngIf","ngIfElse"],["class","loading-section",4,"ngIf"],["class","section your-applications",4,"ngIf"],["class","pending-card",4,"ngIf"],[1,"nav-links"],["routerLink","/admin","class","nav-link",4,"ngIf"],["routerLink","/minigame","class","nav-link",4,"ngIf"],["class","section applications-for-you",4,"ngIf"],[1,"section","applications-for-you"],[3,"app","isSubmitter",4,"ngFor","ngForOf"],[3,"app","isSubmitter"],[1,"loading-section"],["diameter","36"],[1,"section","your-applications"],[3,"app","isSubmitter","removed","refreshed",4,"ngFor","ngForOf"],[1,"fab-container"],[1,"create-icon-btn",3,"click"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"plus-icon"],["cx","12","cy","12","r","11","stroke","white","stroke-width","2","fill","none"],["x1","12","y1","7","x2","12","y2","17","stroke","white","stroke-width","2","stroke-linecap","round"],["x1","7","y1","12","x2","17","y2","12","stroke","white","stroke-width","2","stroke-linecap","round"],[3,"removed","refreshed","app","isSubmitter"],[1,"pending-card"],["routerLink","/admin",1,"nav-link"],["routerLink","/minigame",1,"nav-link"]],template:function(e,i){if(e&1){let n=k();o(0,"div",1)(1,"header",2),p(2,"img",3),o(3,"h2",4),u(4),a(),p(5,"span",5),o(6,"button",6),T("click",function(){return b(n),y(i.logout())}),g(),o(7,"svg",7),p(8,"path",8)(9,"polyline",9)(10,"line",10),a()()(),h(11,Ae,3,0,"ng-container",11)(12,Fe,1,1,"ng-template",null,0,F)(14,Ne,4,0,"section",12)(15,He,12,1,"section",13)(16,Be,2,1,"section",14)(17,Ve,2,1,"section",14),w(),o(18,"nav",15),h(19,We,2,0,"a",16)(20,ze,2,0,"a",17),a()()}if(e&2){let n,l,ye=O(13);s(2),c("src",i.avatarUrl(),Y),s(2),D("Hey, ",(n=i.user())==null?null:n.username,"!"),s(7),c("ngIf",i.loadingTarget())("ngIfElse",ye),s(3),c("ngIf",i.loadingMine()),s(),c("ngIf",!i.loadingMine()&&((l=i.user())==null?null:l.role)!=="BRO"),s(),c("ngIf",i.pendingMember()),s(),c("ngIf",i.pendingAdmin()),s(2),c("ngIf",i.auth.isAdmin()),s(),c("ngIf",i.auth.isMember()||i.auth.isAdmin())}},dependencies:[fe,K,Q,$,oe,de,le,J,Z,_e,he,ce,ne,ve],styles:["[_nghost-%COMP%]{display:block;padding:32px 24px;max-width:900px;margin:0 auto;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f9f9f9;color:#222;min-height:100vh;box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px;background-color:#f9f9f9;border-radius:8px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:12px}.welcome[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1565c0}.spacer[_ngcontent-%COMP%]{flex:1}.section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 0 12px #90caf933;display:flex;flex-direction:column;gap:12px}h3[_ngcontent-%COMP%]{margin:0 0 12px;font-weight:600;color:#1976d2}.pending-card[_ngcontent-%COMP%]{background:#fff9e1;padding:16px 20px;border-radius:10px;font-style:italic;font-weight:600;color:#f9a825;box-shadow:0 0 10px #f9a82588}.fab-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;width:100%}.create-icon-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 20px;font-size:16px;font-weight:600;color:#fff;background:linear-gradient(135deg,#42a5f5,#478ed1);border:none;border-radius:12px;box-shadow:0 4px 12px #42a5f566;cursor:pointer;transition:background .3s,transform .2s}.create-icon-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2196f3,#1e88e5);transform:translateY(-1px)}.create-icon-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.plus-icon[_ngcontent-%COMP%]{width:24px;height:24px}.nav-links[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:24px;justify-content:flex-start}.nav-link[_ngcontent-%COMP%]{color:#1565c0;font-weight:600;text-decoration:none;font-size:1rem;-webkit-user-select:none;user-select:none;transition:color .2s ease-in-out}.nav-link[_ngcontent-%COMP%]:hover{color:#0d47a1;text-decoration:underline}.logout-btn[_ngcontent-%COMP%]{margin-left:auto;color:#444;transition:color .3s}.logout-btn[_ngcontent-%COMP%]:hover{color:#e53935}@media (max-width: 600px){[_nghost-%COMP%]{padding:20px 12px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.welcome[_ngcontent-%COMP%]{font-size:1.4rem}.fab-container[_ngcontent-%COMP%]{justify-content:center}}"]})};export{be as HomeComponent};
