import{A as l,D as o,G as n,X as p,hb as c,vb as u}from"./chunk-HX2KIA6G.js";var h=(e=>(e.MEMBER="MEMBER",e.ADMIN="ADMIN",e))(h||{});var m={api:"http://localhost:3000"};var r=m.api,s=class i{constructor(t){this.http=t}getAllUsers(){return this.http.get(`${r}/users`)}getUsersByRole(t){return this.http.get(`${r}/users?role=${t}`)}getTargeted(t){return this.http.get(`${r}/applications/targeting/${t}`)}login(t,e){return this.http.post(`${r}/auth/login`,{username:t,password:e})}me(){return this.http.get(`${r}/users/me`)}getUser(t){return this.http.get(`${r}/users/${t}`)}getMine(){return this.http.get(`${r}/applications/mine`)}getAll(){return this.http.get(`${r}/applications`)}createApplication(t){return this.http.post(`${r}/applications`,t)}cancelApplication(t){return this.http.patch(`/api/applications/${t}/cancel`,{})}vote(t){return this.http.patch(`${r}/applications/${t}/vote`,{})}unvote(t){return this.http.patch(`${r}/applications/${t}/unvote`,{})}delete(t){return this.http.delete(`${r}/applications/${t}`)}voteApplication=this.vote;unvoteApplication=this.unvote;deleteApplication=this.delete;static \u0275fac=function(e){return new(e||i)(n(u))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var g=class i{constructor(t){this.api=t;this._token()&&this.api.me().subscribe({next:e=>this._user.set(e),error:()=>this.logout()})}_token=p(localStorage.getItem("token"));_role=c(()=>this._user()?.role??"BRO");_user=p(null);token(){return this._token()}role(){return this._role()}user(){return this._user}login(t,e){return this.api.login(t,e).pipe(l(a=>{localStorage.setItem("token",a.access_token),this._token.set(a.access_token),this.api.me().subscribe(b=>this._user.set(b))}))}logout(){localStorage.removeItem("token"),this._token.set(null),this._user.set(null)}hasRole(...t){return t.includes(this._role())}isAdmin(){return this.role()==="ADMIN"}isMember(){return this.role()==="MEMBER"}static \u0275fac=function(e){return new(e||i)(n(s))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{h as a,s as b,g as c};
